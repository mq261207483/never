(function(d){})(jQuery);
window.onload=function(){$(".easyui-combo,.easyui-combotree,.easyui-combobox,.easyui-combogrid").each(function(d){var f=$(this);d=f.attr("class").split(" ")[0].split("-");d="easyui"===d[0]?d[1]:d[0];if(f[d]("options").clear){var a=$.data(this,"combo");d=a.options;var a=a.combo.find("a.combo-arrow"),b=a.siblings("span.combo-clear");0==b.size()&&(b=$('<span class="combo-clear" style="height:20px"></span>'),b.unbind("mouseenter.comno mouseleave.combo").bind("mouseenter.comno mouseleave.combo",function(a){"mouseenter"==
a.type?b.addClass("combo-clear-hover"):b.removeClass("combo-clear-hover")}),b.unbind("click.combo").bind("click.combo",function(a){f.combo("setValue","").combo("setText","")}),a.before(b));d.initClear=!0}})};
(function(d){function f(a,b){var e=d(a).data("_rawdata"),c={ignoreEmpty:!0,ignoreFields:[],filter:void 0};d.extend(c,b);var m={},g=d(a).serializeArray();d.each(g,function(a,b){if(c.ignoreEmpty&&!b.value||-1!=d.inArray(b.name,c.ignoreFields)||d.isFunction(c.filter)&&!c.filter(b.name,b.value))return!0;c.ignoreEmpty||b.value||(b.value=null);var g={},f=b.name.substring(0,b.name.indexOf(".")),p=b.name.substring(b.name.indexOf(".")+1,b.name.length);-1!=b.name.indexOf(".")?e&&e[f]&&e[f][p]&&e[f]&&!b.value?
delete e[f]:b.value&&(g[p]=b.value,b.name=f,b.value=g,m[f]?d.extend(m[f],g):m[f]=g):m[b.name]?d.isArray(m[b.name])?m[b.name].push(b.value):m[b.name]=[m[b.name],b.value]:m[b.name]=b.value});return m}d.extend(d.fn.form.methods,{xload:function(a,b){return a.each(function(){var a=d(this).form.methods.reset,c=d(this).form.methods.clear;d(this).form.methods.reset=function(c){d(c[0]).removeData("_rawdata");return a(c)};d(this).form.methods.clear=function(a){d(a[0]).removeData("_rawdata");return c(a)};d(this).data("_rawdata",
b);d(this).form("load",b)})},serialize:function(a,b){return d(a[0]).data("_rawdata")?d.extend({},d(a[0]).data("_rawdata"),f(a[0],b)):f(a[0],b)}})})(jQuery);
(function(d){function f(e){var c=d.data(e,"orguser"),b=c.options,g=c.tree;d(e).addClass("orguser-f");d(e).combo(b);c=d(e).combo("panel");g||(g=d("<ul></ul>").appendTo(c),d.data(e,"orguser").tree=g);c=!0;"org"==b.treeType&&(c=!1);g.tree(d.extend({},b,{checkbox:b.multiple,cascadeCheck:c,onLoadSuccess:function(a,c){var f=d(e).orguser("getValues");if(b.multiple)for(var n=g.tree("getChecked"),p=0;p<n.length;p++){var q=n[p].id;(function(){for(var a=0;a<f.length;a++)if(q==f[a])return;f.push(q)})()}var n=
d(this).tree("options"),p=n.onCheck,r=n.onSelect;n.onCheck=n.onSelect=function(){};d(e).orguser("setValues",f);n.onCheck=p;n.onSelect=r;b.onLoadSuccess.call(this,a,c)},onClick:function(c){c.attributes&&c.attributes!=b.treeType||(b.multiple?d(this).tree(c.checked?"uncheck":"check",c.target):d(e).combo("hidePanel"),a(e));null==c.id&&d(e).combo("clear");b.onClick.call(this,c)},onCheck:function(c,f){if(null==c.id){d(e).combo("clear");var k=g.tree("getChecked",["checked","indeterminate"]);if(null!=k&&
0<k.length)for(var n=0;n<k.length;n++)null!=k[n].id&&g.tree("uncheck",k[n].target)}else a(e);b.onCheck.call(this,c,f)},onBeforeCheck:function(a,c){b.onBeforeCheck.call(this,a,c)},onBeforeSelect:function(a){if(null!=!a.attributes&&a.attributes!=b.treeType)return!1;b.onBeforeSelect.call(this,a)}}))}function a(a){var c=d.data(a,"orguser"),b=c.options,g=c.tree,c=[],f=[];if(b.multiple)for(var g=g.tree("getChecked"),h=0;h<g.length;h++)g[h].attributes==b.treeType&&(c.push(g[h].id),f.push(g[h].text));else if(g=
g.tree("getSelected"))c.push(g.id),f.push(g.text);d(a).combo("setValues",c).combo("setText",f.join(b.separator))}function b(a,c){var b=d.data(a,"orguser").options,g=d.data(a,"orguser").tree;g.find("span.tree-checkbox").addClass("tree-checkbox0").removeClass("tree-checkbox1 tree-checkbox2");for(var f=[],h=[],k=0;k<c.length;k++){var n=c[k],p=n,q=g.tree("find",n);q&&(p=q.text,g.tree("check",q.target),g.tree("select",q.target));f.push(n);h.push(p)}d(a).combo("setValues",f).combo("setText",h.join(b.separator))}
d.fn.orguser=function(a,b){if("string"==typeof a){var m=d.fn.orguser.methods[a];return m?m(this,b):this.combo(a,b)}a=a||{};return this.each(function(){var g=d.data(this,"orguser");g?d.extend(g.options,a):d.data(this,"orguser",{options:d.extend({},d.fn.orguser.defaults,d.fn.orguser.parseOptions(this),b)});f(this)})};d.fn.orguser.methods={options:function(a){var b=a.combo("options");return d.extend(d.data(a[0],"orguser").options,{width:b.width,height:b.height,originalValue:b.originalValue,disabled:b.disabled,
readonly:b.readonly})},tree:function(a){return d.data(a[0],"orguser").tree},loadData:function(a,b){return a.each(function(){d.data(this,"orguser").options.data=b;d.data(this,"orguser").tree.tree("loadData",b)})},reload:function(a,b){return a.each(function(){var a=d.data(this,"orguser").options,e=d.data(this,"orguser").tree;b&&(a.url=b);e.tree({url:a.url})})},setValues:function(a,c){return a.each(function(){b(this,c)})},setValue:function(a,c){return a.each(function(){b(this,[c])})},clear:function(a){return a.each(function(){var a=
d.data(this,"orguser").tree;a.find("div.tree-node-selected").removeClass("tree-node-selected");for(var b=a.tree("getChecked"),e=0;e<b.length;e++)a.tree("uncheck",b[e].target);d(this).combo("clear")})},reset:function(a){return a.each(function(){var a=d(this).orguser("options");a.multiple?d(this).orguser("setValues",a.originalValue):d(this).orguser("setValue",a.originalValue)})}};d.fn.orguser.parseOptions=function(a){return d.extend({},d.fn.combo.parseOptions(a),d.fn.tree.parseOptions(a))};d.fn.orguser.defaults=
d.extend({},d.fn.combo.defaults,d.fn.tree.defaults,{editable:!1,url:contextPath+"/user/orguser.do",treeType:"user",parent:null,empty:!0,loader:function(a,b,f){var g=d(this).tree("options");if(!g.url)return!1;g.treeType?g.url+="?treeType="+g.treeType:g.parent&&(g.url+="&id="+g.parent);d.ajax({type:g.method,url:g.url,data:a,dataType:"json",success:function(a){var e={id:null,text:"\u6e05\u7a7a",iconCls:"icon-clear"};g.empty&&a.splice(0,0,e);b(a)},error:function(){f.apply(this,arguments)}})}})})(jQuery);
(function(d){Validator_ele={code:/.+/,"char":/.+/,varchar:/.+/,require:/.+/,email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,phone:/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/,mobile:/^((\(\d{2,3}\))|(\d{3}\-))?13\d{9}$/,url:/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/,idcard:"this.IsIdCard(value)",currency:/^\d+(\.\d+)?$/,number:/^\d+$/,zip:/^[1-9]\d{5}$/,qq:/^[1-9]\d{4,8}$/,integer:/^[-\+]?\d+$/,"double":/^[-\+]?\d+(\.\d+)?$/,
english:/^[A-Za-z]+$/,chinese:/^[\u0391-\uFFE5]+$/,username:/^[a-z]\w{3,}$/i,normalstring:/^([a-z]|[A-Z]|\d)+$/,unsafe:/^(([A-Z]*|[a-z]*|\d*|[-_\~!@#\$%\^&\*\.\(\)\[\]\{\}<>\?\\\/\'\"]*)|.{0,5})$|\s/,issafe:function(a){return!this.unsafe.test(a)},safestring:"this.issafe(value)",filter:"this.DoFilter(value, getAttribute('accept'))",limit:"this.limit(value.length,getAttribute('min'),  getAttribute('max'))",limitB:"this.limit(this.LenB(value), getAttribute('min'), getAttribute('max'))",date:"this.IsDate(value, (getAttribute('format')==null?'yyyy-mm-dd':getAttribute('format')))",
repeat:"value == document.getElementsByName(getAttribute('to'))[0].value",range:"getAttribute('min') < (value|0) && (value|0) < getAttribute('max')",compare:"this.compare(value,getAttribute('operator'),getAttribute('to'))",custom:"this.Exec(value, getAttribute('regexp'))",group:"this.MustChecked(getAttribute('name'), getAttribute('min'), getAttribute('max'))",EchoMessageTitle:"\u6821\u9a8c\u63d0\u793a",ErrorItem:[document],ErrorMessage:["\u4ee5\u4e0b\u539f\u56e0\u5bfc\u81f4\u63d0\u4ea4\u5931\u8d25\uff1a\t\t\t\t"],
ErrorMaxCount:16,isExceedErrorMaxCount:!1,isFilterSpeMsg:!1,SpeErrMsg:"\u6587\u5b57\u5185\u5bb9\u4e2d\u7981\u6b62\u5305\u542b\u534a\u89d2\u7684\u5355\u5f15\u53f7\u6216\u53cc\u5f15\u53f7!",currElement:null,GetControlsFromDrdAutoForm:function(a){for(var b=[],e=listControls(),c=0;c<e.length-1;c++)if(!(null==e[c]||""==e[c]||0>e[c].indexOf(a.id+"_editor_"))){var d=eval(e[c]);if(null!=d&&null!=d.getTag()&&0<=d.getTag().indexOf("[validate:")){var g=d.parentElement.previousSibling.innerText;null==g&&(g="");
g=g.trim();if(":"==g.charAt(g.length-1)||"\uff1a"==g.charAt(g.length-1))g=g.substring(0,g.length-1);var d=d=d.getTag(),f=d.indexOf("[validate:")+10,h=d.indexOf("]",f),d=d.substring(f,h);b[b.length]=e[c]+":msg="+g+" ;"+d}}return b},Validate_drd:function(a,b,e){if(null!=a)return this.Validate(this.GetControlsFromDrdAutoForm(a),b,e)},InitElementsAttributes:function(a){for(var b=a.length,e=0;e<b;e++)if(null!=a[e]){var c=[];0>=a[e].indexOf(":")||(c[0]=a[e].substring(0,a[e].indexOf(":")),c[1]=a[e].substring(a[e].indexOf(":")+
1),this.currElement=eval(c[0]),null!=this.currElement&&""!=c[1]&&this.SetElementAttributes(this.currElement,c[1]))}},Validate:function(a,b,e){var c=event.srcElement,d=a.length;this.ErrorMessage.length=1;this.ErrorItem.length=1;this.ErrorItem[0]=c;this.isExceedErrorMaxCount=!1;for(c=0;c<d;c++)if(null!=a[c]){var g=[];if(!(0>=a[c].indexOf(":"))&&(g[0]=a[c].substring(0,a[c].indexOf(":")),g[1]=a[c].substring(a[c].indexOf(":")+1),this.currElement=eval(g[0]),null!=this.currElement&&""!=g[1]))with(this.currElement){this.SetElementAttributes(this.currElement,
g[1]);var f=getAttribute("type"),g=getAttribute("msg");if(null==g||""==g)g=getAttribute("name");if(null==g||""==g)g=getAttribute("id");if("yes"==getAttribute("isIgnore")||"true"==getAttribute("isIgnore"))continue;"text"!=f&&"TEXTAREA"!=tagName||"yes"==getAttribute("isFilter")||(this.isFilterSpeMsg&&"yes"!=getAttribute("isFilter")&&(0<=value.indexOf("'")||0<=value.indexOf('"'))&&!this.isExistError(this.SpeErrMsg)&&this.AddError(c,this.SpeErrMsg),null!=e&&""!=e&&0<=value.indexOf(e)&&!this.isExistError("\u6587\u5b57\u5185\u5bb9\u4e2d\u7981\u6b62\u5305\u542b\u8fdd\u7981\u5b57\u7b26:"+
e)&&this.AddError(c,"\u6587\u5b57\u5185\u5bb9\u4e2d\u7981\u6b62\u5305\u542b\u8fdd\u7981\u5b57\u7b26:"+e),f=getAttribute("selfForbiddenText"),null!=f&&""!=f&&0<=value.indexOf(f)&&!this.isExistError("\u6587\u5b57\u5185\u5bb9\u4e2d\u7981\u6b62\u5305\u542b\u8fdd\u7981\u5b57\u7b26:"+f)&&this.AddError(c,g+"\u5185\u5bb9\u4e2d\u7981\u6b62\u5305\u542b\u8fdd\u7981\u5b57\u7b26:"+getAttribute("selfForbiddenTextMsg")));var f=getAttribute("dataType"),f=null!=f?f.toLowerCase():"varchar",h=getAttribute("maxlength");
if(null==h||""==h)h=999999;if("object"==typeof f||"undefined"==typeof this[f])continue;this.ClearState(this.currElement);if(("false"==getAttribute("require")||null==getAttribute("require")||""==getAttribute("require"))&&""==value)continue;if("true"==getAttribute("require")&&""==value)this.AddError(c,g+Validator_ele.Meginfo("Require"));else switch(f){case "idcard":case "date":case "repeat":case "Range":case "compare":case "custom":case "group":case "limit":case "limitB":case "safestring":case "filter":eval(this[f])||
this.AddError(c,g+Validator_ele.Meginfo(f));break;default:"TEXTAREA"!=tagName&&(value=Validator_ele.trim(value));var k=Validator_ele.Lengthstr(value);if(!this[f].test(Validator_ele.trim(value))||k>h)k<=h?this.AddError(c,g+Validator_ele.Meginfo(f)):k>h&&(this[f].test(Validator_ele.trim(value))?this.AddError(c,g+"\u5185\u5bb9\u8d85\u8fc7\u6700\u5927\u9650\u5236"):this.AddError(c,g+Validator_ele.Meginfo(f)+"\u4e14\u5185\u5bb9\u8d85\u8fc7\u6700\u5927\u9650\u5236"))}if(this.ErrorMessage.length>this.ErrorMaxCount){this.isExceedErrorMaxCount=
!0;break}}}if(1<this.ErrorMessage.length){a="";this.isExceedErrorMaxCount&&(a="\u51fa\u9519\u6570\u5df2\u7ecf\u8d85\u8fc7\u6700\u5927\u9650\u5ea6,\u73b0\u5728\u53ea\u5217\u51fa\u524d "+this.ErrorMaxCount+" \u4e2a!");e=this.ErrorItem.length;switch(b||1){case 2:for(c=1;c<e;c++)this.ErrorItem[c].style.color="red";case 1:messageBox(this.EchoMessageTitle,this.ErrorMessage.join("\r\n")+"\r\n"+a);if("hidden"==this.ErrorItem[1].type||"none"==this.ErrorItem[1].style.display||this.ErrorItem[1].disabled)break;
this.ErrorItem[1].focus();break;case 3:for(c=1;c<e;c++)try{var n=document.createElement("SPAN");n.id="__ErrorMessagePanel";n.style.color="red";this.ErrorItem[c].parentNode.appendChild(n);n.innerHTML=this.ErrorMessage[c].replace(/\d+:/,"*")}catch(p){alert(p.description)}this.ErrorItem[1].focus();break;default:messageBox(this.EchoMessageTitle,this.ErrorMessage.join("\r\n")+"\r\n"+a)}return!1}return!0},Meginfo:function(a){a=a.toLowerCase();return"require"==a?"\u4e3a\u5fc5\u586b\u9879":"email"==a?"\u975eEmail\u683c\u5f0f":
"number"==a?"\u975e\u6b63\u6574\u6570\u683c\u5f0f":"integer"==a?"\u975e\u6574\u6570\u683c\u5f0f":"double"==a?"\u975e\u5c0f\u6570\u683c\u5f0f":"english"==a?"\u975e\u5b57\u7b26\u683c\u5f0f":"chinese"==a?"\u975e\u4e2d\u6587\u683c\u5f0f":"idcard"==a?"\u8eab\u4efd\u8bc1\u53f7\u975e\u6807\u51c6\u683c\u5f0f":"\u975e\u6807\u51c6\u683c\u5f0f"},Lengthstr:function(a){for(var b=0,e=0;e<a.length;e++)255<a.charCodeAt(e)&&b++;return a.length+b},limit:function(a,b,e){e=e||Number.MAX_VALUE;return(b||0)<=a&&a<=e},
LenB:function(a){return a.replace(/[^\x00-\xff]/g,"**").length},ClearState:function(a){with(a)"red"==style.color&&(style.color=""),a=parentNode.childNodes[parentNode.childNodes.length-1],"__ErrorMessagePanel"==a.id&&parentNode.removeChild(a)},AddError:function(a,b){this.ErrorItem[this.ErrorItem.length]=this.currElement;this.ErrorMessage[this.ErrorMessage.length]=this.ErrorMessage.length+":"+b},isExistError:function(a){for(var b=0;b<this.ErrorMessage.length;b++)if(0<=this.ErrorMessage[b].indexOf(a))return!0;
return!1},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},Exec:function(a,b){return RegExp(b,"g").test(a)},compare:function(a,b,e){switch(b){case "NotEqual":return a!=e;case "GreaterThan":return a>e;case "GreaterThanEqual":return a>=e;case "LessThan":return a<e;case "LessThanEqual":return a<=e;default:return a==e}},MustChecked:function(a,b,e){a=document.getElementsByName(a);var c=0;e=e||a.length;for(var d=a.length-1;0<=d;d--)a[d].checked&&c++;return(b||1)<=c&&c<=e},DoFilter:function(a,b){return RegExp("^.+.(?=EXT)(EXT)$".replace(/EXT/g,
b.split(/\s*,\s*/).join("|")),"gi").test(a)},IsIdCard:function(a){var b,e,c=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];e="           \u5317\u4eac \u5929\u6d25 \u6cb3\u5317 \u5c71\u897f \u5185\u8499\u53e4      \u8fbd\u5b81 \u5409\u6797 \u9ed1\u9f99\u6c5f        \u4e0a\u6d77 \u6c5f\u82cf \u6d59\u6c5f \u5b89\u5fae \u798f\u5efa \u6c5f\u897f \u5c71\u4e1c    \u6cb3\u5357 \u6e56\u5317 \u6e56\u5357 \u5e7f\u4e1c \u5e7f\u897f \u6d77\u5357    \u91cd\u5e86 \u56db\u5ddd \u8d35\u5dde \u4e91\u5357 \u897f\u85cf       \u9655\u897f \u7518\u8083 \u9752\u6d77 \u5b81\u590f \u65b0\u7586      \u53f0\u6e7e          \u9999\u6e2f \u6fb3\u95e8         \u56fd\u5916".split(" ");
b=a.match(/^(\d{2})\d{4}(((\d{2})(\d{2})(\d{2})(\d{3}))|((\d{4})(\d{2})(\d{2})(\d{3}[x\d])))$/i);if(null==b||b[1]>=e.length||""==e[b[1]])return!1;12==b[2].length?(e=a.substr(0,17),b=[b[9],b[10],b[11]].join("-")):(e=a.substr(0,6)+"19"+a.substr(6),b=["19"+b[4],b[5],b[6]].join("-"));if(!this.IsDate(b,"ymd"))return!1;for(var d=b=0;16>=d;d++)b+=e.charAt(d)*c[d];e+="10x98765432".charAt(b%11);return 15==a.length||18==a.length&&a==e},IsDate:function(a,b){function e(a){return(30>a?"20":"19")+a|0}b=b||"ymd";
var c,d,g,f,h,k,n;switch(b){case "ymd":c=a.match(/^((\d{4})|(\d{2}))([-./])(\d{1,2})\4(\d{1,2})$/);if(null==c)return!1;f=c[6];g=1*c[5];d=4==c[2].length?c[2]:e(parseInt(c[3],10));break;case "dmy":c=a.match(/^(\d{1,2})([-./])(\d{1,2})\2((\d{4})|(\d{2}))$/);if(null==c)return!1;f=c[1];g=1*c[3];d=4==c[5].length?c[5]:e(parseInt(c[6],10));break;case "yyyymmdd":c=a.match(/^(\d{4})(\d{2})(\d{2})$/);if(null==c)return!1;f=c[3];g=c[2];d=c[1];break;case "yyyy-mm-dd":c=a.match(/^(\d{4})[-](\d{1,2})[-](\d{1,2})$/);
if(null==c)return!1;f=c[3];g=c[2];d=c[1];break;case "yyyy-mm-dd hh:mi:ss":c=a.match(/^(\d{4})[-](\d{1,2})[-](\d{1,2})[ ](\d{1,2})[:](\d{1,2})[:](\d{1,2})$/);if(null==c)return!1;n=c[6];k=c[5];h=c[4];f=c[3];g=c[2];d=c[1]}if(!parseInt(g,10))return!1;g=0==g?12:g;"yyyy-mm-dd hh:mi:ss"==b?(c=new Date(d,g-1,f,h,k,n),g=(g="object"==typeof c&&d==c.getFullYear()&&g==c.getMonth()+1&&f==c.getDate())&&h==c.getHours()&&k==c.getMinutes()&&n==c.getSeconds()):(c=new Date(d,g-1,f),g="object"==typeof c&&d==c.getFullYear()&&
g==c.getMonth()+1&&f==c.getDate());return g},getFullMonth:function(a){if(11<a)return"12";if(0>a)return"01";a+=1;1==(a+"").length&&(a="0"+a);return a},getFullDate:function(a){1==(a+"").length&&(a="0"+a);return a},SetElementAttributes:function(a,b){with(a)for(var e=b.split(";"),c=0;c<e.length;c++){var d=e[c].split("=");null!=d[0]&&null!=d[1]&&setAttribute(d[0],d[1])}}};var f=function(){var a=navigator.appName;this.IE=-1<a.indexOf("Explorer");this.Opera=-1<a.indexOf("Opera");this.isUploadFileAll=this.isUploadFile=
!1;this.counter=1;this.pathGetIdHandler=this.pathGetInfoHandler=this.pathUploadHandler=this.sessionId=this.idRowSelected=null;this.imPath="imgs/";this.strings={remove:"\u5220\u9664",upload:"\u4e0a\u4f20",done:"\u6210\u529f",error:"\u9519\u8bef",btnAdd:"\u6dfb\u52a0\u6587\u4ef6",btnUpload:"\u4e0a\u4f20",btnClean:"\u6e05\u7a7a",btnClose:"\u5173\u95ed"};this.strings.errors={TooBig:"File is too big ({0};bytes).\nMax allowed size is {1}.",PostSize:"Undefined server error. Possible issues:\n- Unicode file name incorrectly processed by the server;\n- File size is bigger than server's post-request limit ({0})."};
this.filesLimit=0;this.fileList={};this.uploadedCount=0;this.inpMAX_FILE_SIZE=this.progressDemo=null;this.MAX_FILE_SIZE=943718400;this.inpUPLOAD_IDENTIFIER=null};f.prototype.setServerHandlers=function(a,b,e){this.pathUploadHandler=a;this.pathGetInfoHandler=b;this.pathGetIdHandler=e};f.prototype.setImagePath=function(a){this.imPath=a;this.preLoadImages()};f.prototype.create=function(a){this.parentObject=document.getElementById(a);this.parentObject.style.position="relative";this.parentObject.innerHTML=
"<iframe src='about:blank' id='dhtmlxVaultUploadFrame' name='dhtmlxVaultUploadFrame' style='display:none;position:absolute;left:-1000px;width:1px;height:1px'></iframe>";this.containerDiv=document.createElement("div");this.containerDiv.className="dhxvlt_panel2border";this.containerDiv.style.cssText="position:absolute;overflow-y:auto;height:190px;background-color:#FFFFFF;top:10px;left:10px;z-index:10;width:410px";this.parentObject.appendChild(this.containerDiv);this.container=document.createElement("div");
this.container.style.position="relative";this.container.innerHTML="<table class='dhxvlt_panelbg dhxvlt_panelborder' border='0'><tr><td style='width:416px' colspan='4' align='center' id='cellContainer'><div style='height:200px'></div></td></tr><tr><td style='width:100px;height:32px' align='left'></td><td style='width:170px;height:32px' align='left'><div class='dhxvlt_lbtn'><span class='dhxvlt_lbtn1'></span><span class='dhxvlt_lbtn2'><nobr><img src='"+this.imPath+"upload.gif'/> "+this.strings.btnUpload+
"</nobr></span><span class='dhxvlt_lbtn3'></span></div></td><td style='width:70px;height:32px;' align='right'><div class='dhxvlt_rbtn'><span class='dhxvlt_rbtn3'></span><span class='dhxvlt_rbtn2'><nobr><img src='"+this.imPath+"clean.gif'/> "+this.strings.btnClean+"</nobr></span><span class='dhxvlt_rbtn1'></span></div></td><td style='width:70px;height:32px' align='right'><div id='_closeVault_' class='dhxvlt_rbtn'><span class='dhxvlt_rbtn3'></span><span class='dhxvlt_rbtn2'><nobr><img src='"+this.imPath+
"close.png'/> "+this.strings.btnClose+"</nobr></span><span class='dhxvlt_rbtn1'></span></div></td></tr></table><div class='btnAddBtn dhxvlt_lbtn'><span class='dhxvlt_lbtn1'></span><span class='dhxvlt_lbtn2'><nobr><img src='"+this.imPath+"add.gif'/> "+this.strings.btnAdd+"</nobr></span><span class='dhxvlt_lbtn3'></span></div><div class='btnAddDiv'><input type='file' id='file1' name='upload_tag_name' value='' class='dhxvlt_hidden "+(this.Opera?"dhxvlt_fo":"")+"'/></div>";this.parentObject.appendChild(this.container);
var b=this;this.container.childNodes[0].rows[1].cells[1].childNodes[0].onclick=function(){b.uploadAllItems()};this.container.childNodes[0].rows[1].cells[2].childNodes[0].onclick=function(){b.removeAllItems()};this.container.childNodes[0].rows[1].cells[3].childNodes[0].onclick=function(){b.closeDiv()};this.fileContainer=this.container.childNodes[2];this.currentFile=this.fileContainer.childNodes[0];this.currentFile.onchange=function(){b.addFile()};this.IE?this.uploadForm=document.createElement("<form enctype='multipart/form-data' target='dhtmlxVaultUploadFrame' method='post'>"):
(this.uploadForm=document.createElement("form"),this.uploadForm.method="post",this.uploadForm.encoding="multipart/form-data",this.uploadForm.target="dhtmlxVaultUploadFrame");this.container.appendChild(this.uploadForm);this.inpMAX_FILE_SIZE=document.createElement("input");this.inpMAX_FILE_SIZE.type="hidden";this.inpMAX_FILE_SIZE.name="xMAX_FILE_SIZE";this.inpMAX_FILE_SIZE.value=this.MAX_FILE_SIZE;this.uploadForm.appendChild(this.inpMAX_FILE_SIZE);this.inpUPLOAD_IDENTIFIER=document.createElement("input");
this.inpUPLOAD_IDENTIFIER.type="hidden";this.inpUPLOAD_IDENTIFIER.name="UPLOAD_IDENTIFIER";this.uploadForm.appendChild(this.inpUPLOAD_IDENTIFIER);this.tblListFiles=null;this.tblProgressBar=this.createProgressBar();this.percentPanel=this.createPercentPanel();this.containerDiv.appendChild(this.percentPanel);this.progressDemo=this.createProgressDemo()};f.prototype.createXMLHttpRequest=function(){var a=null;window.ActiveXObject?a=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(a=new XMLHttpRequest);
return a};f.prototype.getFileName=function(a){a=a.split("\\");a=a[a.length-1];a=a.split("/");return a[a.length-1]};f.prototype.selectItem=function(a){var b=this.getCurrentRowListFiles(a);if("undefined"==typeof b)return!1;if(this.idRowSelected){var e=this.getCurrentRowListFiles(this.idRowSelected);e?e.id!=b.id?(b.className="dhxvlt_rowsel",this.idRowSelected=a,e.className="dhxvlt_row"):(b.className="dhxvlt_row",this.idRowSelected=""):(b.className="dhxvlt_rowsel",this.idRowSelected=a)}else b.className=
"dhxvlt_rowsel",this.idRowSelected=a};f.prototype.enableAddButton=function(a){this.currentFile.disabled=!a;var b=this.currentFile.parentNode.previousSibling.childNodes[1].childNodes[0].childNodes[0];b.src=this.imPath+(a?"add.gif":"add_d.gif");b.parentNode.className=a?"":"dhxvlt_dis"};f.prototype.checkFilesLimit=function(){if(0<this.filesLimit){var a=this.getTotalFilesCount();this.enableAddButton(a<this.filesLimit)}};f.prototype.addFile=function(){var a=this.currentFile;try{if(""==a.value)return;if(!this.onAddFile(a.value)){a.value=
"";return}}catch(b){}var e=this.createId();this.fileList[e]={id:e,name:a.value,uploaded:!1,error:!1};a.disabled=!0;a.style.display="none";this.uploadForm.appendChild(a);var c=document.createElement("input");c.type="file";c.className="dhxvlt_hidden"+(this.Opera?" dhxvlt_fo":"");c.id="file"+(e+1);c.name="upload_tag_name";this.currentFile=c;var d=this;c.onchange=function(){return d.addFile()};this.fileContainer.appendChild(c);var a=this.getFileName(a.value),c=this.getImgFile(a),g=this.containerDiv;null==
this.tblListFiles&&(this.tblListFiles=this.createTblListFiles(),g.appendChild(this.tblListFiles));g=this.tblListFiles.insertRow(this.tblListFiles.rows.length);g.setAttribute("fileItemId",e);g.setAttribute("id","rowListFiles"+e);g.setAttribute("isUpload","false");g.onclick=function(){d.selectItem(e)};var f=document.createElement("td");f.align="center";g.appendChild(f);g=document.createElement("table");f.appendChild(g);g.style.cssText="border-bottom:1px solid #E2E2E2";g.cellPadding="0px";g.cellSpacing=
"0px";g.border="0px";g.id="tblContent"+e;var f=g.insertRow(g.rows.length),h=document.createElement("td");h.rowSpan=2;h.align="center";if(this.IE){var k=document.createElement("span");k.style.cssText="width:40px;height:40px;display:inline-block;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+" ')";h.appendChild(k)}else h.innerHTML="<img src='"+c+"'/>";h.style.width="60px";f.appendChild(h);h=document.createElement("td");h.align="left";h.vAlign="bottom";h.style.cssText="width:300px;height:30px";
h.innerHTML="<div class='fileName'><div class='fileName'>"+a+"</div></div> ";h.className="fileName";f.appendChild(h);h=document.createElement("td");h.style.cssText="width:140px;height:30px";h.innerHTML="<div title='"+this.strings.remove+"' id='dhxvlt_icoremove'></div><a href='javascript:void(0)' class='link dhxvlt_txtremove'>"+this.strings.remove+"</a>";h.firstChild.onclick=h.childNodes[1].onclick=function(){d.removeItem(e)};h.vAlign="bottom";h.align="center";f.appendChild(h);f=g.insertRow(g.rows.length);
h=document.createElement("td");h.align="left";h.style.cssText="width:300px;height:30px";f.appendChild(h);h=document.createElement("td");h.style.cssText="width:140px;height:30px";h.innerHTML="<a href='javascript:void(0)' class='link' style='visibility:hidden'>"+this.strings.upload+"</a>";h.firstChild.onclick=function(){d.uploadFile(e);return!1};h.vAlign="middle";h.align="center";f.appendChild(h);this.checkFilesLimit()};f.prototype.getFileExtension=function(a){var b="";a=a.split(".");1<a.length&&(b=
a[a.length-1].toLowerCase());return b};f.prototype.getImgFile=function(a){var b=this.imPath+"ico_image.png",e=this.imPath+"ico_video.png",c=this.imPath+"ico_sound.png",d=this.imPath+"ico_zip.png",f=this.imPath+"ico_file.png";a=this.getFileExtension(a);return""==a?f:-1!="jpg,jpeg,gif,png,bmp,tiff".indexOf(a)?b:-1!="avi,mpg,mpeg,rm,move".indexOf(a)?e:-1!="wav,mp3,ogg".indexOf(a)?c:-1!="zip,rar,tar,tgz,arj".indexOf(a)?d:f};f.prototype.createId=function(){return this.counter++};f.prototype.createTblListFiles=
function(){var a=document.createElement("table");a.id="tblListFiles";a.style.backgroundColor="#FFFFFF";a.cellPadding="0";a.cellSpacing="0";a.border="0";return a};f.prototype.removeItem=function(a){var b=this.getCurrentRowListFiles(a);b.parentNode.removeChild(b);delete this.fileList[a];this.checkFilesLimit()};f.prototype.removeAllItems=function(){if(!this.isUploadFile){if(null!=this.tblListFiles){var a=this.tblListFiles.rows.length;if(0<a)for(var b=0;b<a;b++)this.tblListFiles.deleteRow(0)}this.fileList=
{}}this.checkFilesLimit()};f.prototype.closeDiv=function(){d("#_vault2Win_").window("close")};f.prototype.uploadAllItems=function(){var a=-1;if(null!=this.tblListFiles&&0<this.tblListFiles.rows.length){for(var b=0;b<this.tblListFiles.rows.length;b++)if("false"==this.tblListFiles.rows[b].attributes.isUpload.value){a=b;break}if(-1!=a)this.isUploadFileAll=!0,this.uploadFile(this.tblListFiles.rows[b].attributes.fileItemId.value);else{if(this.isUploadFileAll)try{this.onUploadComplete(this.objToArray(this.fileList))}catch(e){}this.fileList=
{};this.isUploadFileAll=!1}}};f.prototype.objToArray=function(a){var b=[],e;for(e in a)b[b.length]=a[e];return b};f.prototype.createProgressDemo=function(){var a=this.imPath+"pb_demoupload.gif",b=document.createElement("table");b.cellPadding="0";b.cellSpacing="0";b.border="0";b.style.cssText="height:10px;width:153px;display:none;";b.id="progress";var e=b.insertRow(b.rows.length),c=document.createElement("td");c.style.cssText="font-size:1px;border:1px solid #A9AEB3;";c.innerHTML="<img src="+a+" style = 'width:150px;height:8px;'/>";
e.appendChild(c);return b};f.prototype.createProgressBar=function(){var a=this.imPath+"pb_back.gif",b=this.imPath+"pb_empty.gif",e=document.createElement("table");e.cellPadding="0";e.cellSpacing="0";e.border="0";e.style.cssText="height:10px;width:149px;border-bottom:0px !important;display:none";e.id="progress";var c=e.insertRow(e.rows.length),d=document.createElement("td");d.style.cssText="font-size:1px;background-image:url("+a+");width:150px;height:10px;border:1px solid #A9AEB3";d.align="right";
a=document.createElement("img");a.src=b;a.style.width="100%";a.style.height="7px";d.appendChild(a);c.appendChild(d);return e};f.prototype.createPercentPanel=function(){var a=document.createElement("div");a.style.cssText="font-size:9px;height:8px;position:absolute;left:210px;width:20px;display:none;padding-top:0px";a.id="percentCompletedValue";return a};f.prototype.endLoading=function(a,b){this.isUploadFile=!1;this.progressDemo.style.display="none";this.container.appendChild(this.progressDemo);var e=
this.fileList[a];e&&(e.error=b,e.uploaded=!b);try{this.onFileUploaded(e)}catch(c){}if(b)try{this.onUploadComplete(this.objToArray(this.fileList))}catch(d){}(e=this.getCurrentInputFile(a))&&e.parentNode.removeChild(e)};f.prototype.startRequest=function(a){var b=this.createXMLHttpRequest();b.open("POST",this.pathGetIdHandler,!1);b.send("id="+a);if(200==b.status){if(!b.responseText)throw"error";this.sessionId=b.responseText;this.inpUPLOAD_IDENTIFIER.value=this.sessionId}else throw"error";};f.prototype.sendIdSession=
function(a){try{var b=this.createXMLHttpRequest();b.open("post",this.pathGetInfoHandler,!1);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");b.send("sessionId="+this.sessionId);if(200==b.status){var e=b.responseText;if(e){var c=e.split(":");if("error"==c[0]){if(-2==c[1]){var d=document.getElementById("dhtmlxVaultUploadFrame");d&&(d.src="about:blank");alert(this.printf(this.strings.errors.TooBig,c[2],c[3]))}else-3==c[1]&&alert(this.printf(this.strings.errors.PostSize,
c[2]));throw"error";}e=parseInt(e,10);if(isNaN(e))throw"error";if(-2==e)this.endLoading(a,!0),this.isUploadFile=this.isUploadFileAll=!1,this.showMessageInfo(a,this.strings.error);else if(-1!=e){var f=this;try{window.setTimeout(function(){f.sendIdSession(a)},1E3)}catch(l){}}else-1==e&&(this.uploadedCount++,this.endLoading(a,!1),this.showMessageInfo(a,this.strings.done),this.isUploadFileAll&&this.uploadAllItems())}}else throw"error";}catch(h){this.endLoading(a,!0),this.isUploadFile=this.isUploadFileAll=
!1,this.showMessageInfo(a,this.strings.error)}};f.prototype.printf=function(){for(var a=arguments.length,b=arguments[0],e=1;e<a;e++)b=b.replace(RegExp("\\{"+(e-1)+"\\}","g"),arguments[e]);return b};f.prototype.showMessageInfo=function(a,b){var e=this.getCurrentTblContent(a);e.rows[1].cells[0].innerHTML+="<font class='text'>"+b+"</font>";e.rows[1].cells[0].vAlign="top"};f.prototype.showProgressInfo=function(a){this.tblProgressBar.rows[0].cells[0].firstChild.style.width=100-a+"%";this.percentPanel.innerHTML=
"<nobr>"+a+"%</nobr>"};f.prototype.getFilesCount=function(){return this.tblListFiles&&this.tblListFiles.rows?this.tblListFiles.rows.length:0};f.prototype.getTotalFilesCount=function(){var a=this.uploadedCount;if(null!=this.tblListFiles&&0<this.tblListFiles.rows.length)for(var b=0;b<this.tblListFiles.rows.length;b++)"false"==this.tblListFiles.rows[b].attributes.isUpload.value&&a++;return a};f.prototype.getCurrentRowListFiles=function(a){for(var b=0;b<this.tblListFiles.rows.length;b++)if(this.tblListFiles.rows[b].id==
"rowListFiles"+a)return this.tblListFiles.rows[b]};f.prototype.getCurrentTblContent=function(a){for(var b=0;b<this.tblListFiles.rows.length;b++)if(this.tblListFiles.rows[b].cells[0].firstChild.id=="tblContent"+a)return this.tblListFiles.rows[b].cells[0].firstChild};f.prototype.getFormField=function(a,b){for(var e=this.uploadForm.getElementsByTagName("input"),c=0;c<e.length;c++){var d=e[c];if(d.type.toLowerCase()==a&&d.id==b)return d}return null};f.prototype.getCurrentInputFile=function(a){return this.getFormField("file",
"file"+a)};f.prototype.uploadFile=function(a){if(!this.isUploadFile){this.selectItem(a);var b=this.getCurrentTblContent(a);b.rows[0].cells[2].removeChild(b.rows[0].cells[2].firstChild);b.rows[1].cells[1].removeChild(b.rows[1].cells[1].firstChild);b.parentNode.parentNode.attributes.isUpload.value="true";this.isUploadFile=!0;this.getCurrentInputFile(a).disabled=!1;this.progressDemo.style.display="inline";this.getCurrentRowListFiles(a).cells[0].firstChild.rows[1].cells[0].appendChild(this.progressDemo);
try{this.startRequest(a),this.sendIdSession(a)}catch(e){this.endLoading(a,!0);this.isUploadFile=this.isUploadFileAll=!1;b.rows[1].cells[0].innerHTML+="<font class='text'>"+this.strings.error+"</font>";b.rows[1].cells[0].vAlign="top";return}this.isUploadFile&&(this.uploadForm.action=this.pathUploadHandler+"&sessionId="+this.sessionId+"&fileName="+escape(this.getFileName(this.getCurrentInputFile(a).value))+"&userfile="+this.getCurrentInputFile(a).id,this.uploadForm.submit())}};f.prototype.preLoadImages=
function(){for(var a="add.gif add_d.gif btn1.gif btn2.gif btn3.gif clean.gif upload.gif delete.gif ico_file.png ico_image.png ico_sound.png ico_video.png ico_zip.png pb_back.gif pb_demoupload.gif pb_empty.gif rowsel.gif".split(" "),b=Array(a.length),e=0;e<a.length;e++)b[e]=new Image,b[e].src=this.imPath+a[e]};f.prototype.setFilesLimit=function(a){a=parseInt(a);!isNaN(a)&&0<=a&&(this.filesLimit=a)};f.prototype.setFormField=function(a,b){if(this.uploadForm){var e=this.getFormField("hidden",a);null===
b?e&&this.uploadForm.removeChild(e):(e||(e=document.createElement("input"),e.type="hidden",e.name=a,this.uploadForm.appendChild(e)),e.value=b)}else alert("Please call setFormField() method after create()!")};f.prototype.onAddFile=function(a){return!0};f.prototype.onUploadComplete=function(a){};f.prototype.onFileUploaded=function(a){};d.extend(d.fn.textbox.defaults,{isFile:!1,filesLimit:1,fileExtension:"",baseHandlerPath:contextPath||"",savepath:"",onAddFile:function(a){},onFileUploaded:function(a){},
onUploadComplete:function(a){}});d.extend(d.fn.textbox.methods,{createUpField:function(a,b){var e="",c=d(a[0]).textbox("options"),m=d("<div id='_vault2Win_' style='overflow:hidden;'><div id='_vault2_'></div></div>");d(document.body).append(m);vault=new f;vault.setImagePath(contextPath+"/resources/themes/default/images/");vault.setServerHandlers(c.baseHandlerPath+"/upload.do?operatype=uploadfile&savepath="+c.savepath,c.baseHandlerPath+"/upload.do?operatype=getuploadinfo",c.baseHandlerPath+"/upload.do?operatype=getuploadid");
vault.filesLimit=c.filesLimit;vault.onAddFile=function(a){c.onAddFile(a);var b=c.fileExtension||"";a=this.getFileExtension(a);if(""==b||a==b)return!0;d.messager.alert("\u63d0\u793a","\u8bf7\u9009\u62e9"+b+"\u6587\u4ef6\uff01");return!1};vault.onFileUploaded=function(a){e+=a.name+";";c.onFileUploaded(a)};vault.onUploadComplete=function(b){var f="";d.ajaxSetup({async:!1});d.get(c.baseHandlerPath+"/upload.do?operatype=getfiles",function(a){f=a},"text");for(var h=!0,k=0;k<b.length;k++)if(b[k].error){h=
!1;break}b.localFileNames=e;b.remoteFileNames=f;c.onUploadComplete(b);h&&(d.messager.alert("\u63d0\u793a","\u4e0a\u4f20\u6210\u529f\uff01"),d(a[0]).data("upFileNames",e),d(a[0]).data("getValue",f),d(a[0]).textbox("setValue",f),d(a[0]).textbox("setText",e),d("#_vault2Win_").window("close"))};vault.create("_vault2_");d("#_vault2Win_").window({title:"\u6587\u4ef6\u4e0a\u4f20",width:443,height:276,resizable:!1,minimizable:!1,maximizable:!1,border:!1,modal:!0});d(a[0]).textbox({inputEvents:{blur:function(a){}}})}})})(jQuery);
(function(d){function f(e,c){var f=d(e).tree("options"),g=f.onLoadSuccess;a=c.currentId;b=c.idsOfParents;null!=a&&""!=a&&(f.onLoadSuccess=function(c,f){if(null!=b&&""!=b)for(var k=b.split("/"),n=k.length-1;0<=n;n--){var m=d(e).tree("find",k[n]);m&&d(e).tree("expand",m.target);0==n&&(m=d(e).tree("find",a))&&(d(e).tree("select",m.target),b=a=null)}else if(m=d(e).tree("find",a))d(e).tree("select",m.target),a=null;g(c,f)});d(e).tree("reload");return e}var a,b;d.extend(d.fn.tree.methods,{rebuildTree:function(a,
b){return a.each(function(){f(this,b)})}})})(jQuery);
(function(d){d.extend(d.fn.validatebox.defaults.rules,{Pattern:{validator:function(d,a){return RegExp(a[0]).test(d)},message:"{1}"},Min:{validator:function(d,a){return 0<=d-a[0]},message:"{1}"},Max:{validator:function(d,a){return 0>=d-a[0]},message:"{1}"},Size:{validator:function(d,a){return d.length>=a[0]&&d.length<=a[1]},message:"{2}"},Past:{validator:function(d,a){var b=(new Date).getTime();return(new Date(d)).getTime()<=b},message:"{0}"},Future:{validator:function(d,a){var b=(new Date).getTime();
return(new Date(d)).getTime()>=b},message:"{0}"}})})(jQuery);
function initValidate(d){for(var f=0;f<d.length;f++){var a=!1,b=null,e=d[f].property,c=d[f].validates;if(d[f].inQuery&&$("#text-query-"+e)){var m=[],g=$("#text-query-"+e).attr("class");if(g){var g=g.split(" ")[0].replace("easyui-",""),l=$("#text-query-"+e)[g]("options").validType,h=0;a:for(;h<c.length;h++)if("NotNull"==c[h].validate)a=!0,b=c[h].message;else if("Pattern"!=c[h].validate){if(null!=l&&"string"==typeof l&&""!=l){var k=l.split("[");if(c[h].validate==k[0])break}else if(null!=l&&"object"==
typeof l&&0<l.length)for(f=0;f<l.length;f++)if(k=l[f].split("["),c[h].validate==k[0])break a;c[h].params.push(c[h].message);k="'"+c[h].params.join("','")+"'";k=c[h].validate+"["+k+"]";m.push(k)}if(null!=l&&"string"==typeof l&&""!=l)m.push(l);else if(null!=l&&"object"==typeof l&&0<l.length)for(f=0;f<l.length;f++)m.push(l[f]);$("#text-query-"+e)[g]({validType:m})}}if(d[f].inForm&&$("#text-manage-"+e)&&(m=[],g=$("#text-manage-"+e).attr("class"))){g=g.split(" ")[0].split("-");g="easyui"===g[0]?g[1]:g[0];
l=$("#text-manage-"+e)[g]("options").validType;h=0;a:for(;h<c.length;h++)if("NotNull"==c[h].validate)a=!0,b=c[h].message;else{if(null!=l&&"string"==typeof l&&""!=l){if(k=l.split("["),c[h].validate==k[0])continue}else if(null!=l&&"object"==typeof l&&0<l.length)for(f=0;f<l.length;f++)if(k=l[f].split("["),c[h].validate==k[0])continue a;c[h].params.push(c[h].message);k="'"+c[h].params.join("','")+"'";k=c[h].validate+"["+k+"]";m.push(k)}if(null!=l&&"string"==typeof l&&""!=l)m.push(l);else if(null!=l&&
"object"==typeof l&&0<l.length)for(f=0;f<l.length;f++)m.push(l[f]);$("#text-manage-"+e)[g]({required:a,missingMessage:b,validType:m})}}};
